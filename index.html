<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ... (existing head content) ... -->
</head>
<body>
    <h1>ESP32 Multi-Sensor BLE Device</h1>
    <button id="connectButton">Connect to ESP32</button>
    <div id="sensorData">
        <p>Temperature: -- °C</p>
        <p>Pressure: -- hPa</p>
        <p>Humidity: -- %</p>
        <p>Gas: -- Ohms</p>
        <p>Light: -- lux</p>
        <p>Acceleration: X: -- , Y: -- , Z: -- m/s²</p>
        <p>Gyroscope: X: -- , Y: -- , Z: -- deg/s</p>
    </div>

    <script>
        const SERVICE_UUID = "181a";
        const CHAR_TEMP_UUID = "2a6e";
        const CHAR_PRESSURE_UUID = "2a6d";
        const CHAR_HUMIDITY_UUID = "2a6f";
        const CHAR_GAS_UUID = "2a70";
        const CHAR_LIGHT_UUID = "2a77";
        const CHAR_ACCEL_UUID = "2713";
        const CHAR_GYRO_UUID = "2a76";
        let device;

        // ... (existing connectToDevice function) ...

        async function connectToDevice() {
            try {
                // ... (existing connection code) ...

                const lightChar = await service.getCharacteristic(CHAR_LIGHT_UUID);
                const accelChar = await service.getCharacteristic(CHAR_ACCEL_UUID);
                const gyroChar = await service.getCharacteristic(CHAR_GYRO_UUID);

                lightChar.addEventListener('characteristicvaluechanged', handleLightChange);
                accelChar.addEventListener('characteristicvaluechanged', handleAccelChange);
                gyroChar.addEventListener('characteristicvaluechanged', handleGyroChange);

                await lightChar.startNotifications();
                await accelChar.startNotifications();
                await gyroChar.startNotifications();

                // ... (rest of the connection code) ...
            } catch (error) {
                console.error('Error:', error);
            }
        }

        // ... (existing handler functions) ...

        function handleLightChange(event) {
            const lux = event.target.value.getUint16(0, true);
            updateSensorData('Light', `${lux.toFixed(2)} lux`);
        }

        function handleAccelChange(event) {
            const x = event.target.value.getFloat32(0, true);
            const y = event.target.value.getFloat32(4, true);
            const z = event.target.value.getFloat32(8, true);
            updateSensorData('Acceleration', `X: ${x.toFixed(2)}, Y: ${y.toFixed(2)}, Z: ${z.toFixed(2)} m/s²`);
        }

        function handleGyroChange(event) {
            const x = event.target.value.getFloat32(0, true);
            const y = event.target.value.getFloat32(4, true);
            const z = event.target.value.getFloat32(8, true);
            updateSensorData('Gyroscope', `X: ${x.toFixed(2)}, Y: ${y.toFixed(2)}, Z: ${z.toFixed(2)} deg/s`);
        }

        // ... (existing updateSensorData function) ...
    </script>
</body>
</html>
